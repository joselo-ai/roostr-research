<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Accountability Dashboard ‚Äî ROOSTR</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Mono', 'Monaco', 'Courier New', monospace;
            background: #0a0a0a;
            color: #e0e0e0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .header {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }
        
        .header h1 {
            font-size: 2.5em;
            color: #ffffff;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #9ca3af;
            font-size: 1.1em;
        }
        
        .last-updated {
            color: #4ade80;
            font-size: 0.9em;
            margin-top: 15px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .section {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }
        
        .section-full {
            grid-column: 1 / -1;
        }
        
        .section h2 {
            color: #ffffff;
            font-size: 1.5em;
            margin-bottom: 20px;
            border-bottom: 2px solid #4ade80;
            padding-bottom: 10px;
        }
        
        /* DECISION TIMELINE */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .decision-card {
            background: #0f0f0f;
            border-left: 4px solid #4ade80;
            padding: 20px;
            border-radius: 6px;
            position: relative;
        }
        
        .decision-card.critical { border-left-color: #f87171; }
        .decision-card.medium { border-left-color: #fbbf24; }
        
        .decision-time {
            color: #9ca3af;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .decision-title {
            color: #ffffff;
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .decision-detail {
            color: #d1d5db;
            margin-left: 15px;
            margin-bottom: 8px;
            line-height: 1.8;
        }
        
        .decision-detail::before {
            content: '‚îú‚îÄ ';
            color: #6b7280;
        }
        
        .decision-detail:last-of-type::before {
            content: '‚îî‚îÄ ';
        }
        
        /* COST TRACKER */
        .cost-box {
            background: #0f0f0f;
            border: 2px solid #4ade80;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .cost-title {
            color: #9ca3af;
            margin-bottom: 15px;
        }
        
        .cost-stat {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #2a2a2a;
        }
        
        .cost-stat:last-child {
            border-bottom: none;
        }
        
        .cost-label {
            color: #9ca3af;
        }
        
        .cost-value {
            color: #ffffff;
            font-weight: 600;
        }
        
        .cost-breakdown {
            margin-top: 20px;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            color: #d1d5db;
        }
        
        .warning {
            background: #fbbf24;
            color: #0a0a0a;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        /* TASK BOARD */
        .kanban {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        
        .kanban-column {
            background: #0f0f0f;
            border-radius: 6px;
            padding: 15px;
            min-height: 300px;
        }
        
        .kanban-header {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #4ade80;
        }
        
        .kanban-count {
            color: #9ca3af;
            font-size: 0.9em;
        }
        
        .task-card {
            background: #1a1a1a;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .task-card:hover {
            transform: translateX(5px);
            background: #252525;
        }
        
        .task-name {
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .task-desc {
            color: #9ca3af;
            font-size: 0.85em;
        }
        
        /* PERFORMANCE */
        .metric-group {
            margin-bottom: 25px;
        }
        
        .metric-group-title {
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            margin-left: 15px;
            color: #d1d5db;
        }
        
        .metric::before {
            content: '‚îú‚îÄ ';
            color: #6b7280;
            margin-right: 8px;
        }
        
        .metric:last-child::before {
            content: '‚îî‚îÄ ';
        }
        
        .metric-value {
            color: #4ade80;
            font-weight: 600;
        }
        
        /* AUTONOMOUS ACTIONS */
        .action-log {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .action-card {
            background: #0f0f0f;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #4ade80;
        }
        
        .action-card.high { border-left-color: #fbbf24; }
        .action-card.critical { border-left-color: #f87171; }
        
        .action-time {
            color: #9ca3af;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .action-title {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .action-detail {
            color: #d1d5db;
            margin-left: 15px;
            margin-bottom: 5px;
        }
        
        /* APPROVAL QUEUE */
        .approval-item {
            background: #0f0f0f;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 4px solid #4ade80;
        }
        
        .approval-item.high { border-left-color: #f87171; }
        .approval-item.medium { border-left-color: #fbbf24; }
        
        .approval-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .approval-priority {
            color: #f87171;
            font-weight: 600;
        }
        
        .approval-status {
            background: #4ade80;
            color: #0a0a0a;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .approval-status.pending {
            background: #fbbf24;
        }
        
        .approval-title {
            color: #ffffff;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .approval-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: opacity 0.2s;
        }
        
        .btn:hover {
            opacity: 0.8;
        }
        
        .btn-approve {
            background: #4ade80;
            color: #0a0a0a;
        }
        
        .btn-reject {
            background: #f87171;
            color: #ffffff;
        }
        
        .btn-info {
            background: #3b82f6;
            color: #ffffff;
        }
        
        /* RISK MONITOR */
        .risk-item {
            background: #0f0f0f;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 4px solid #4ade80;
        }
        
        .risk-item.high { border-left-color: #f87171; }
        .risk-item.medium { border-left-color: #fbbf24; }
        
        .risk-header {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .risk-badge {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.75em;
            font-weight: 700;
        }
        
        .risk-badge.high {
            background: #f87171;
            color: #ffffff;
        }
        
        .risk-badge.medium {
            background: #fbbf24;
            color: #0a0a0a;
        }
        
        .risk-badge.low {
            background: #4ade80;
            color: #0a0a0a;
        }
        
        /* AUDIT TRAIL */
        .audit-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            background: #0f0f0f;
            border: 1px solid #3b3b3b;
            border-radius: 4px;
            color: #ffffff;
            font-family: inherit;
        }
        
        .filter-select {
            padding: 10px;
            background: #0f0f0f;
            border: 1px solid #3b3b3b;
            border-radius: 4px;
            color: #ffffff;
            font-family: inherit;
        }
        
        .audit-log {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .audit-entry {
            background: #0f0f0f;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        
        .audit-time {
            color: #9ca3af;
            margin-bottom: 5px;
        }
        
        .audit-action {
            color: #ffffff;
            font-weight: 600;
        }
        
        .audit-details {
            color: #d1d5db;
            margin-left: 15px;
            margin-top: 5px;
        }
        
        /* PROGRESS BAR */
        .progress-bar {
            background: #0f0f0f;
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4ade80, #22c55e);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0a0a0a;
            font-weight: 600;
            font-size: 0.85em;
            transition: width 0.3s;
        }
        
        .progress-fill.warning {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
        }
        
        .progress-fill.danger {
            background: linear-gradient(90deg, #f87171, #ef4444);
        }
        
        /* RESPONSIVE */
        @media (max-width: 1200px) {
            .kanban {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .kanban {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
        }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0f0f0f;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #3b3b3b;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #4a4a4a;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <h1>üîç Accountability Dashboard</h1>
        <p>Complete transparency into every decision, dollar, and action</p>
        <div class="last-updated">Last updated: <span id="last-updated">Loading...</span></div>
    </div>

    <!-- SECTION 1: DECISION TIMELINE -->
    <div class="section section-full">
        <h2>üìã Decision Timeline</h2>
        <div class="timeline" id="decision-timeline">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- SECTION 2: COST TRACKER -->
    <div class="grid">
        <div class="section">
            <h2>üí∞ Cost Tracker</h2>
            <div class="cost-box">
                <div class="cost-title">TODAY'S SPEND</div>
                <div class="cost-stat">
                    <span class="cost-label">Tokens:</span>
                    <span class="cost-value"><span id="tokens-used">0</span> / 200,000 (<span id="tokens-pct">0</span>%)</span>
                </div>
                <div class="cost-stat">
                    <span class="cost-label">Cost:</span>
                    <span class="cost-value">~$<span id="cost-today">0.00</span></span>
                </div>
                <div class="cost-stat">
                    <span class="cost-label">Budget:</span>
                    <span class="cost-value">$5/day (<span id="budget-pct">0</span>% used) <span id="budget-status">‚úÖ</span></span>
                </div>
            </div>
            
            <div class="cost-breakdown">
                <div style="color: #ffffff; font-weight: 600; margin-bottom: 10px;">BY SESSION:</div>
                <div id="cost-by-agent"></div>
            </div>
            
            <div class="cost-breakdown" style="margin-top: 20px;">
                <div style="color: #ffffff; font-weight: 600; margin-bottom: 10px;">WARNINGS:</div>
                <div id="cost-warnings"></div>
            </div>
        </div>

        <!-- SECTION 4: PERFORMANCE DASHBOARD -->
        <div class="section">
            <h2>üìä Performance Metrics</h2>
            
            <div class="metric-group">
                <div class="metric-group-title">ACCURACY METRICS:</div>
                <div class="metric">
                    <span>Conviction Score Accuracy:</span>
                    <span class="metric-value">N/A (no closed trades)</span>
                </div>
                <div class="metric">
                    <span>Task Completion Rate:</span>
                    <span class="metric-value">17/20 (85%)</span>
                </div>
                <div class="metric">
                    <span>Time Estimation Accuracy:</span>
                    <span class="metric-value">-15% (overestimate)</span>
                </div>
                <div class="metric">
                    <span>Error Rate:</span>
                    <span class="metric-value">2/100 commands (2%)</span>
                </div>
            </div>
            
            <div class="metric-group">
                <div class="metric-group-title">SPEED METRICS:</div>
                <div class="metric">
                    <span>Avg Response Time:</span>
                    <span class="metric-value">4.2s</span>
                </div>
                <div class="metric">
                    <span>Avg Build Time:</span>
                    <span class="metric-value">3.1 hours (promised: 2-3h)</span>
                </div>
                <div class="metric">
                    <span>Uptime:</span>
                    <span class="metric-value">99.2%</span>
                </div>
            </div>
            
            <div class="metric-group">
                <div class="metric-group-title">QUALITY METRICS:</div>
                <div class="metric">
                    <span>Code Quality:</span>
                    <span class="metric-value">All tests passing ‚úÖ</span>
                </div>
                <div class="metric">
                    <span>Documentation:</span>
                    <span class="metric-value">100% coverage ‚úÖ</span>
                </div>
                <div class="metric">
                    <span>User Satisfaction:</span>
                    <span class="metric-value">TBD</span>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION 3: TASK BOARD -->
    <div class="section section-full">
        <h2>üìã Task Board</h2>
        <div class="kanban">
            <div class="kanban-column">
                <div class="kanban-header">
                    BACKLOG
                    <div class="kanban-count">(4)</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Backtest signals</div>
                    <div class="task-desc">Historical validation needed</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Stripe setup</div>
                    <div class="task-desc">Payment processing for signal feed</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Advisor outreach</div>
                    <div class="task-desc">DM 10 quant analysts</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Marketing automation</div>
                    <div class="task-desc">Phase 2 content scheduling</div>
                </div>
            </div>
            
            <div class="kanban-column">
                <div class="kanban-header">
                    IN PROGRESS
                    <div class="kanban-count">(2)</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Accountability Dashboard</div>
                    <div class="task-desc">Building transparency layer</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Weather trading</div>
                    <div class="task-desc">Simmer SDK integration</div>
                </div>
            </div>
            
            <div class="kanban-column">
                <div class="kanban-header">
                    BLOCKED
                    <div class="kanban-count">(3)</div>
                </div>
                <div class="task-card">
                    <div class="task-name">GitHub push</div>
                    <div class="task-desc">Secrets in repo blocking</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Twitter API</div>
                    <div class="task-desc">No API key yet</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Dashboard mobile</div>
                    <div class="task-desc">IP address blocking access</div>
                </div>
            </div>
            
            <div class="kanban-column">
                <div class="kanban-header">
                    DONE
                    <div class="kanban-count">(17)</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Quant Agent</div>
                    <div class="task-desc">Multi-agent system operational</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Reddit scraper</div>
                    <div class="task-desc">Social sentiment integration</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Marketing Phase 1</div>
                    <div class="task-desc">Twitter launch complete</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Command Center</div>
                    <div class="task-desc">Daily review dashboard</div>
                </div>
                <div class="task-card">
                    <div class="task-name">Signal Feed Product</div>
                    <div class="task-desc">Landing page + docs</div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION 5: AUTONOMOUS ACTION LOG -->
    <div class="section section-full">
        <h2>ü§ñ Autonomous Action Log</h2>
        <div style="color: #fbbf24; margin-bottom: 15px; font-weight: 600;">
            TODAY: <span id="autonomous-count">0</span> AUTONOMOUS ACTIONS
        </div>
        <div class="action-log" id="autonomous-log">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- SECTION 6: APPROVAL QUEUE -->
    <div class="section section-full">
        <h2>‚úã Approval Queue</h2>
        <div id="approval-queue">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- SECTION 7: RISK MONITOR -->
    <div class="section section-full">
        <h2>‚ö†Ô∏è Risk Monitor</h2>
        <div style="color: #f87171; margin-bottom: 15px; font-weight: 600;">
            ACTIVE RISKS: <span id="risk-count">5</span>
        </div>
        <div id="risk-monitor">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- SECTION 8: AUDIT TRAIL -->
    <div class="section section-full">
        <h2>üîç Audit Trail</h2>
        <div class="audit-controls">
            <input type="text" class="search-input" id="audit-search" placeholder="Search audit log...">
            <select class="filter-select" id="audit-filter">
                <option value="all">All Actions</option>
                <option value="trading">Trading</option>
                <option value="decision">Decisions</option>
                <option value="marketing">Marketing</option>
                <option value="automation">Automation</option>
                <option value="research">Research</option>
            </select>
            <button class="btn btn-info" onclick="exportAuditCSV()">Export CSV</button>
        </div>
        <div class="audit-log" id="audit-log">
            <!-- Populated by JS -->
        </div>
    </div>

    <script src="accountability-data.js"></script>
    <script>
        // Initialize dashboard
        function initDashboard() {
            updateLastUpdated();
            loadDecisionTimeline();
            loadCostTracker();
            loadAutonomousActions();
            loadApprovalQueue();
            loadRiskMonitor();
            loadAuditTrail();
            
            // Auto-refresh every 10 seconds
            setInterval(() => {
                updateLastUpdated();
                loadCostTracker();
                loadAuditTrail();
            }, 10000);
        }
        
        function updateLastUpdated() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                timeZoneName: 'short'
            });
            document.getElementById('last-updated').textContent = timeStr;
        }
        
        function loadDecisionTimeline() {
            const timeline = document.getElementById('decision-timeline');
            const decisions = window.AccountabilityData?.decisions || [];
            
            timeline.innerHTML = decisions.map(d => `
                <div class="decision-card ${d.severity}">
                    <div class="decision-time">${d.icon} ${d.time}</div>
                    <div class="decision-title">${d.title}</div>
                    ${d.details.map(detail => `<div class="decision-detail">${detail}</div>`).join('')}
                </div>
            `).join('');
        }
        
        function loadCostTracker() {
            const cost = window.AccountabilityData?.cost || {};
            
            document.getElementById('tokens-used').textContent = cost.tokensUsed?.toLocaleString() || '0';
            document.getElementById('tokens-pct').textContent = cost.tokensPct || '0';
            document.getElementById('cost-today').textContent = cost.costToday?.toFixed(2) || '0.00';
            document.getElementById('budget-pct').textContent = cost.budgetPct || '0';
            document.getElementById('budget-status').textContent = cost.budgetPct > 80 ? '‚ö†Ô∏è' : '‚úÖ';
            
            // By agent
            const byAgent = document.getElementById('cost-by-agent');
            if (cost.byAgent) {
                byAgent.innerHTML = cost.byAgent.map(a => `
                    <div class="cost-item">
                        <span>${a.name}:</span>
                        <span>~${a.tokens.toLocaleString()} tokens ($${a.cost.toFixed(2)})</span>
                    </div>
                `).join('');
            }
            
            // Warnings
            const warnings = document.getElementById('cost-warnings');
            if (cost.warnings) {
                warnings.innerHTML = cost.warnings.map(w => `
                    <div class="cost-item">
                        <span class="warning">‚ö†Ô∏è</span>
                        <span>${w}</span>
                    </div>
                `).join('');
            }
        }
        
        function loadAutonomousActions() {
            const log = document.getElementById('autonomous-log');
            const actions = window.AccountabilityData?.autonomousActions || [];
            
            document.getElementById('autonomous-count').textContent = actions.length;
            
            log.innerHTML = actions.map(a => `
                <div class="action-card ${a.severity}">
                    <div class="action-time">${a.time} ‚Äî ${a.title} ${a.badge}</div>
                    ${a.details.map(d => `<div class="action-detail">‚îú‚îÄ ${d}</div>`).join('')}
                </div>
            `).join('');
        }
        
        function loadApprovalQueue() {
            const queue = document.getElementById('approval-queue');
            const items = window.AccountabilityData?.approvalQueue || [];
            
            queue.innerHTML = items.map(item => `
                <div class="approval-item ${item.priority.toLowerCase()}">
                    <div class="approval-header">
                        <span class="approval-priority">${item.icon} ${item.priority} PRIORITY</span>
                        <span class="approval-status ${item.status === 'APPROVED' ? '' : 'pending'}">${item.status}</span>
                    </div>
                    <div class="approval-title">${item.title}</div>
                    ${item.details.map(d => `<div class="decision-detail">${d}</div>`).join('')}
                    ${item.buttons ? `
                        <div class="approval-buttons">
                            ${item.buttons.map(b => `<button class="btn ${b.class}">${b.text}</button>`).join('')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        function loadRiskMonitor() {
            const monitor = document.getElementById('risk-monitor');
            const risks = window.AccountabilityData?.risks || [];
            
            document.getElementById('risk-count').textContent = risks.length;
            
            monitor.innerHTML = risks.map(r => `
                <div class="risk-item ${r.severity}">
                    <div class="risk-header">
                        <span class="risk-badge ${r.severity}">${r.severity.toUpperCase()}</span>
                        <span>${r.title}</span>
                    </div>
                    ${r.details.map(d => `<div class="decision-detail">${d}</div>`).join('')}
                </div>
            `).join('');
        }
        
        function loadAuditTrail() {
            const log = document.getElementById('audit-log');
            const entries = window.AccountabilityData?.auditTrail || [];
            
            const searchTerm = document.getElementById('audit-search')?.value.toLowerCase() || '';
            const filterCategory = document.getElementById('audit-filter')?.value || 'all';
            
            const filtered = entries.filter(e => {
                const matchesSearch = !searchTerm || 
                    e.action.toLowerCase().includes(searchTerm) ||
                    e.details.toLowerCase().includes(searchTerm);
                const matchesFilter = filterCategory === 'all' || e.category === filterCategory;
                return matchesSearch && matchesFilter;
            });
            
            log.innerHTML = filtered.map(e => `
                <div class="audit-entry">
                    <div class="audit-time">${e.time} ‚Äî ${e.action}</div>
                    <div class="audit-details">‚îú‚îÄ User: ${e.user}</div>
                    <div class="audit-details">‚îî‚îÄ ${e.details}</div>
                </div>
            `).join('');
        }
        
        function exportAuditCSV() {
            const entries = window.AccountabilityData?.auditTrail || [];
            const csv = [
                ['Time', 'Category', 'Action', 'User', 'Details'],
                ...entries.map(e => [e.time, e.category, e.action, e.user, e.details])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `audit-trail-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }
        
        // Event listeners for search/filter
        document.addEventListener('DOMContentLoaded', () => {
            initDashboard();
            
            document.getElementById('audit-search')?.addEventListener('input', loadAuditTrail);
            document.getElementById('audit-filter')?.addEventListener('change', loadAuditTrail);
        });
    </script>
</body>
</html>
