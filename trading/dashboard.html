<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>roostr Trading Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #0a0a0a; 
            color: #e0e0e0; 
            padding: 20px; 
            line-height: 1.6; 
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { 
            margin-bottom: 30px; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px; 
        }
        h1 { 
            color: #fff; 
            font-size: 2.5em; 
            margin-bottom: 10px; 
        }
        .rooster { font-size: 1.5em; }
        .subtitle { 
            color: #888; 
            font-size: 0.9em; 
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
        }
        .stat-label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 8px;
        }
        .stat-value {
            color: #fff;
            font-size: 1.8em;
            font-weight: 600;
        }
        .positive { color: #4ade80 !important; }
        .negative { color: #f87171 !important; }
        .neutral { color: #fbbf24 !important; }
        
        table {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        th {
            background: #0f0f0f;
            color: #888;
            text-align: left;
            padding: 15px;
            font-weight: 600;
            font-size: 0.9em;
            text-transform: uppercase;
        }
        td {
            padding: 15px;
            border-top: 1px solid #2a2a2a;
        }
        .ticker {
            color: #fff;
            font-weight: 600;
            font-size: 1.1em;
        }
        .footer {
            margin-top: 40px;
            text-align: center;
            color: #666;
            font-size: 0.85em;
            padding-top: 20px;
            border-top: 1px solid #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="rooster">üêì</span> roostr Trading Dashboard</h1>
            <p class="subtitle" id="timestamp">Loading...</p>
        </header>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">Portfolio Value</div>
                <div class="stat-value" id="portfolio-value">$45,000</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Net P&L</div>
                <div class="stat-value neutral" id="net-pnl">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Deployed</div>
                <div class="stat-value">$45,000 (45%)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Open Positions</div>
                <div class="stat-value">3</div>
            </div>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Ticker</th>
                    <th>Entry</th>
                    <th>Current</th>
                    <th>Shares</th>
                    <th>Value</th>
                    <th>P&L $</th>
                    <th>P&L %</th>
                </tr>
            </thead>
            <tbody id="positions">
                <!-- Populated by JavaScript -->
            </tbody>
        </table>
        
        <div class="footer">
            <p>roostr Capital ¬∑ Phase 1 Paper Trading ($100k)</p>
            <p>Auto-refreshes every 60 seconds ¬∑ Data: Yahoo Finance</p>
            <p>GitHub: <a href="https://github.com/joselo-ai/roostr-research" style="color: #4ade80;">joselo-ai/roostr-research</a></p>
        </div>
    </div>
    
    <script>
        const POSITIONS = {
            'ALL': { name: 'Allstate', shares: 96.62, entry: 207.00, entryValue: 20000 },
            'PGR': { name: 'Progressive', shares: 74.42, entry: 201.57, entryValue: 15000 },
            'KTB': { name: 'Kontoor Brands', shares: 149.25, entry: 67.00, entryValue: 10000 }
        };
        
        async function fetchPrice(symbol) {
            try {
                const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1m&range=1d`);
                const data = await response.json();
                const quote = data.chart.result[0].meta.regularMarketPrice;
                return quote;
            } catch (error) {
                console.error(`Error fetching ${symbol}:`, error);
                return null;
            }
        }
        
        async function updateDashboard() {
            const tbody = document.getElementById('positions');
            tbody.innerHTML = '';
            
            let totalPnL = 0;
            let totalValue = 0;
            
            for (const [symbol, pos] of Object.entries(POSITIONS)) {
                const currentPrice = await fetchPrice(symbol);
                
                if (currentPrice) {
                    const currentValue = currentPrice * pos.shares;
                    const pnlDollars = currentValue - pos.entryValue;
                    const pnlPercent = (pnlDollars / pos.entryValue) * 100;
                    
                    totalPnL += pnlDollars;
                    totalValue += currentValue;
                    
                    const row = document.createElement('tr');
                    const pnlClass = pnlDollars >= 0 ? 'positive' : 'negative';
                    
                    row.innerHTML = `
                        <td class="ticker">${symbol}</td>
                        <td>$${pos.entry.toFixed(2)}</td>
                        <td>$${currentPrice.toFixed(2)}</td>
                        <td>${pos.shares.toFixed(2)}</td>
                        <td>$${currentValue.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}</td>
                        <td class="${pnlClass}">${pnlDollars >= 0 ? '+' : ''}$${pnlDollars.toFixed(2)}</td>
                        <td class="${pnlClass}">${pnlDollars >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%</td>
                    `;
                    tbody.appendChild(row);
                }
            }
            
            // Update totals
            const pnlElement = document.getElementById('net-pnl');
            const pnlPercent = (totalPnL / 45000) * 100;
            pnlElement.textContent = `${totalPnL >= 0 ? '+' : ''}$${totalPnL.toFixed(0)} (${totalPnL >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%)`;
            pnlElement.className = `stat-value ${totalPnL >= 0 ? 'positive' : 'negative'}`;
            
            document.getElementById('portfolio-value').textContent = `$${totalValue.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`;
            
            // Update timestamp
            const now = new Date();
            const timeStr = now.toLocaleString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric', 
                hour: 'numeric', 
                minute: '2-digit',
                timeZoneName: 'short'
            });
            document.getElementById('timestamp').textContent = `Last updated: ${timeStr}`;
        }
        
        // Update on load
        updateDashboard();
        
        // Auto-refresh every 60 seconds
        setInterval(updateDashboard, 60000);
    </script>
</body>
</html>
